{{define "content"}}
{{if .Submitted}}
<h1>Check Your Email</h1>
<div class="notice success">
  If your address is registered, a link is on its way.
</div>
{{else if not .LoggedIn}}
<h1>Request Access</h1>
<p>Enter your email address to receive an access link.</p>
<form method="POST" action="/submit">
  <label for="email">Email address</label>
  <input type="email" id="email" name="email" required autofocus placeholder="you@example.com">
  <button type="submit">Send link</button>
</form>
{{else if .AlreadyAllowed}}
<h1>Already Authorized</h1>
<div class="notice success">
  <strong>{{.IP}}</strong> is already in the allowlist. Your access has been refreshed.
</div>
{{else}}
<h1>Authorize Access</h1>
<p>Add your current IP address to the allowlist:</p>
<div class="notice">
  <strong>{{.IP}}</strong>
</div>
<form method="POST" action="/authorize">
  <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
  <button type="submit">Authorize this IP</button>
</form>
{{end}}
{{end}}
